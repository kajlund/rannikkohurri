var angular=angular||null,toastr=toastr||null,Spinner=Spinner||null,moment=moment||null;!function(e,n,o,t){"use strict";var r={radius:40,lines:7,length:0,width:30,speed:1.7,corners:1,trail:100,color:"#D00062",zIndex:2e9,left:"auto",top:"200px"};t.lang("sv"),n.options.timeOut=2e3,n.options.positionClass="toast-bottom-right";var s=e.module("app",["ngRoute","ngCookies","ui.bootstrap","hc.marked"]);s.config(["$routeProvider","$httpProvider","marked",function(e,n,o){n.defaults.headers.common["X-Parse-Application-Id"]="HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1",n.defaults.headers.common["X-Parse-REST-API-Key"]="LZqwu8VIutbaphzVoPW7yf4RxkKQAMbAapwubT5L",o.setOptions({gfm:!0}),e.when("/",{redirectTo:"/home"}).when("/home",{templateUrl:"app/home.html",controller:"MainController"}).when("/posts",{templateUrl:"app/posts/posts.html",controller:"PostsController"}).when("/posts/:id",{templateUrl:"app/posts/post.html",controller:"PostController"}).when("/links",{templateUrl:"app/links/links.html",controller:"LinksController"}).when("/about",{templateUrl:"app/about.html",controller:"AboutController"}).when("/books",{templateUrl:"app/books/list.html",controller:"BookListController"}).when("/movies",{templateUrl:"app/movies/movies.html",controller:"MoviesController"}).when("/events",{templateUrl:"app/events/list.html",controller:"EventListController"}).when("/cheats",{templateUrl:"app/cheats/list.html",controller:"CheatsListController"}).otherwise({redirectTo:"/home"})}]),s.run(["$rootScope","$location","$log",function(e,n,t){e.spinner=new o(r).spin(window.document.documentElement),e.spinner.spin(),t.info("App Loaded")}]),s.directive("aDisabled",function(){return{restrict:"A",priority:-99999,link:function(e,n,o){e.$watch(o.aDisabled,function(t,r){t?n.unbind("click"):r&&n.bind("click",function(){e.$apply(o.ngClick)})})}}})}(angular,toastr,Spinner,moment),function(e){"use strict";e.module("app").controller("AboutController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(e,n){"use strict";e.module("app").controller("MainController",["$scope","$rootScope","$location","$log","$modal","SessionService",function(e,o,t,r,s,l){o.spinnerOptions={radius:40,lines:7,length:0,width:30,speed:1.7,corners:1,trail:100,color:"#000",left:"auto",top:"auto"},e.session=l,r.info(l),l.loggedOn()||(r.info("not logged on"),l.autoSignon().then(function(){r.info(e.session)},function(e){r.error(e)})),o.spinner.stop(),e.getClass=function(e){var n="";return t.path().substr(0,e.length)===e&&(n="active"),n},e.onSignonClick=function(){var e={name:"",pwd:""},o=s.open({templateUrl:"app/signon.html",controller:"SignonController",resolve:{user:function(){return e}}});o.result.then(function(){l.signon(e.name,e.pwd).then(function(){n.info(l.userObj.username+" signed on")},function(e){n.error(e.error)})},function(){n.info("Signon cancelled")})},e.onSignoffClick=function(){r.info("Signing off"),l.signoff(),n.warning("User signed off")}}])}(angular,toastr),function(e){"use strict";e.module("app").controller("SignonController",["$scope","$modalInstance","user",function(e,n,o){e.user=o,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e){"use strict";e.module("app").factory("SessionService",["$rootScope","$http","$cookieStore","$log","$q",function(e,n,o,t,r){function s(e){i.userObj=e,i.sessionToken=e.sessionToken,o.put("ParseUser",e)}function l(){i.userObj=null,i.sessionToken="",o.remove("ParseUser")}var i={};return i.sessionToken="",i.userObj=null,i.autoSignon=function(){var e=o.get("ParseUser"),l={headers:{"X-Parse-Application-Id":"HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1","X-Parse-REST-API-Key":"LZqwu8VIutbaphzVoPW7yf4RxkKQAMbAapwubT5L","X-Parse-Session-Token":e?e.sessionToken:""},method:"GET",url:"https://api.parse.com/1/users/me"},i=r.defer();return e&&e.sessionToken.length>10?n(l).success(function(e){t.info("autoSignon success, data = %o",e),s(e),i.resolve(e)}).error(function(e){i.reject(e.error)}):i.reject("Invalid Cookie"),i.promise},i.loggedOn=function(){return null!==i.userObj},i.signoff=function(){l()},i.signon=function(e,o){var t="?username="+e+"&password="+o,i={method:"GET",url:" https://api.parse.com/1/login"+t};return n(i).then(function(e){return"object"==typeof e.data?(s(e.data),e.data):(l(),r.reject(e.data))},function(e){return l(),r.reject(e.data)})},i}])}(angular),function(e){"use strict";e.module("app").controller("bookDeleteController",["$scope","$modalInstance","book",function(e,n,o){e.book=o,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e){"use strict";e.module("app").controller("bookEditController",["$scope","$modalInstance","book",function(e,n,o){e.book=o,e.languages=["swe","eng","fin"],e.genres=["Biography","History","Kids","Misc","Novel","Science","Technology"],e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular);var angular=angular||null,toastr=toastr||null;!function(e,n){"use strict";e.module("app").controller("BookListController",["$scope","$rootScope","$location","$log","$modal","SessionService","BookDataService",function(e,o,t,r,s,l,i){function c(){o.spinner.spin(),i.getPage(e.order,e.filter,e.currentPage).then(function(n){e.items=n.data.results,e.totalItems=n.data.count},function(e){o.spinner.stop(),r.error(e),n.error(e.error.code+" "+e.error.error)})}e.session=l,e.filter="",e.currentPage=1,e.maxSize=10,e.order="title",e.totalItems=0,c(),e.onAddClick=function(){var e={authors:"",genre:"",image:"",lang:"",subtitle:"",title:""},o=s.open({templateUrl:"app/books/edit.html",controller:"bookEditController",resolve:{book:function(){return e}}});o.result.then(function(){i.updateItem(e).then(function(e){r.info("Added Audiobook %o",e),n.success("Audiobook added"),c()},function(e){r.error(e),n.error(e.error.code+" "+e.error.error)})},function(){r.info("Cancelled New"),n.warning("New cancelled")})},e.onEditClick=function(e){var o=s.open({templateUrl:"app/books/edit.html",controller:"bookEditController",resolve:{book:function(){return e}}});o.result.then(function(){i.updateItem(e).then(function(e){r.info("Updated Audiobook %o",e),n.success("Audiobook updated"),c()},function(e){r.error(e),n.error(e.error.code+" "+e.error.error)})},function(){r.info("Cancelled Edit"),n.warning("Edit cancelled")})},e.onDeleteClick=function(e){var o=s.open({templateUrl:"app/books/delete.html",controller:"bookDeleteController",resolve:{book:function(){return e}}});o.result.then(function(){i.deleteItem(e).then(function(){r.info("Deleted Audiobook"),n.success("Audiobook deleted"),c()},function(e){r.error(e),n.error(e.error.code+" "+e.error.error)})},function(){r.info("Cancel"),n.warning("Delete cancelled")})},e.onPageChanged=function(n){e.currentPage=n,c()}}])}(angular,toastr);var angular=angular||null;!function(e){"use strict";e.module("app").factory("BookDataService",["$log","$q","$http","SessionService",function(e,n,o,t){var r="https://api.parse.com/1/classes/AudioBook",s={};return s.pageSize=10,s.getItem=function(e){var n={headers:{"X-Parse-Session-Token":t.sessionToken},isArray:!1,method:"GET",url:r+"/"+e};return o(n)},s.getItems=function(){var e={headers:{"X-Parse-Session-Token":t.sessionToken},isArray:!1,method:"GET",url:r+"?count=1&limit=1000&order=title"};return o(e)},s.getPage=function(e,n,l){var i=""===n?"":'&where={"'+e+'":{"$gte":"'+n+'"}}',c=(l-1)*s.pageSize,a="?count=1&limit="+s.pageSize+"&skip="+c+"&order="+e+i,u={headers:{"X-Parse-Session-Token":t.sessionToken},isArray:!1,method:"GET",url:r+a};return o(u)},s.updateItem=function(e){var n=void 0===e.objectId,s=n?r+"/":r+"/"+e.objectId,l={headers:{"X-Parse-Session-Token":t.sessionToken},method:n?"POST":"PUT",url:s,data:e};return o(l)},s.deleteItem=function(e){var n=r+"/"+e.objectId,s={headers:{"X-Parse-Session-Token":t.sessionToken},method:"DELETE",url:n};return o(s)},s}])}(angular),function(e){"use strict";e.module("app").controller("cheatsDeleteController",["$scope","$modalInstance","cache",function(e,n,o){e.cache=o,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e){"use strict";e.module("app").controller("cheatsEditController",["$scope","$modalInstance","cache",function(e,n,o){e.cache=o,e.cacheTypes=["Tradi","Mystery","Multi","Earth","Letterbox","Event","Lab","Virtual"],e.currentType=o.cacheType,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular);var angular=angular||null,toastr=toastr||null;!function(e,n){"use strict";e.module("app").controller("CheatsListController",["$scope","$rootScope","$log","$modal","CheatsDataService","SessionService",function(e,o,t,r,s,l){function i(){o.spinner.spin(),s.getItems().then(function(n){t.info(n),e.items=n.data.results,o.spinner.stop()},function(e){o.spinner.stop(),t.error(e),n.error(e.error.code+" "+e.error.error)})}e.session=l,i(),e.onAddClick=function(){var e={cacheId:"",cacheType:"",name:"",coords:"",verifiedCoords:!1},o=r.open({templateUrl:"app/cheats/edit.html",controller:"cheatsEditController",resolve:{cache:function(){return e}}});o.result.then(function(){s.updateItem(e).then(function(e){t.info("Added Cache %o",e),n.success("Cache added"),i()},function(e){t.error(e),n.error(e.error.code+" "+e.error.error)})},function(){t.info("Cancelled New"),n.warning("New cancelled")})},e.onEditClick=function(e){var o=r.open({templateUrl:"app/cheats/edit.html",controller:"cheatsEditController",resolve:{cache:function(){return e}}});o.result.then(function(){s.updateItem(e).then(function(e){t.info("Updated Cache %o",e),n.success("Cache updated"),i()},function(e){t.error(e),n.error(e.error.code+" "+e.error.error)})},function(){t.info("Cancelled Edit"),n.warning("Edit cancelled")})},e.onDeleteClick=function(e){var o=r.open({templateUrl:"app/cheats/delete.html",controller:"cheatsDeleteController",resolve:{cache:function(){return e}}});o.result.then(function(){EventDataService.deleteItem(e).then(function(){t.info("Deleted Cache"),n.success("Cache deleted"),i()},function(e){t.error(e),n.error(e.error.code+" "+e.error.error)})},function(){t.info("Cancel"),n.warning("Delete cancelled")})}}])}(angular,toastr);var angular=angular||null;!function(e){"use strict";e.module("app").factory("CheatsDataService",["$log","$q","$http","SessionService",function(e,n,o,t){var r="https://api.parse.com/1/classes/Cheat",s={};return s.getItem=function(e){var n={headers:{"X-Parse-Session-Token":t.sessionToken},isArray:!1,method:"GET",url:r+"/"+e};return o(n)},s.getItems=function(){var e={headers:{"X-Parse-Session-Token":t.sessionToken},isArray:!1,method:"GET",url:r+"?count=1&limit=1000&order=name"};return o(e)},s.updateItem=function(e){var n=void 0===e.objectId,s=n?r+"/":r+"/"+e.objectId,l={headers:{"X-Parse-Session-Token":t.sessionToken},method:n?"POST":"PUT",url:s,data:e};return o(l)},s.deleteItem=function(e){var n=r+"/"+e.objectId,s={headers:{"X-Parse-Session-Token":t.sessionToken},method:"DELETE",url:n};return o(s)},s}])}(angular),function(e){"use strict";e.module("app").controller("eventDeleteController",["$scope","$modalInstance","event",function(e,n,o){e.event=o,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e){"use strict";e.module("app").controller("eventEditController",["$scope","$modalInstance","event",function(e,n,o){e.event=o,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular);var angular=angular||null,toastr=toastr||null;!function(e,n){"use strict";e.module("app").controller("EventListController",["$scope","$rootScope","$log","$modal","EventDataService",function(e,o,t,r,s){function l(){o.spinner.spin(),s.getEvents().then(function(n){t.info(n),e.events=n.data.results,o.spinner.stop()},function(e){o.spinner.stop(),t.error(e),n.error(e.error.code+" "+e.error.error)})}l(),e.onAddClick=function(){var e={starts:"",eventName:"",placeName:"",organizer:"",organizerUrl:"",smartum:!1},o=r.open({templateUrl:"app/events/edit.html",controller:"eventEditController",resolve:{event:function(){return e}}});o.result.then(function(){s.updateItem(e).then(function(e){t.info("Added Event %o",e),n.success("Event added"),l()},function(e){t.error(e),n.error(e.error.code+" "+e.error.error)})},function(){t.info("Cancelled New"),n.warning("New cancelled")})},e.onEditClick=function(e){var o=r.open({templateUrl:"app/events/edit.html",controller:"eventEditController",resolve:{event:function(){return e}}});o.result.then(function(){s.updateItem(e).then(function(e){t.info("Updated Event %o",e),n.success("Event updated"),l()},function(e){t.error(e),n.error(e.error.code+" "+e.error.error)})},function(){t.info("Cancelled Edit"),n.warning("Edit cancelled")})},e.onDeleteClick=function(e){var o=r.open({templateUrl:"app/events/delete.html",controller:"eventDeleteController",resolve:{event:function(){return e}}});o.result.then(function(){s.deleteItem(e).then(function(){t.info("Deleted Event"),n.success("Event deleted"),l()},function(e){t.error(e),n.error(e.error.code+" "+e.error.error)})},function(){t.info("Cancel"),n.warning("Delete cancelled")})}}])}(angular,toastr);var angular=angular||null;!function(e){"use strict";e.module("app").factory("EventDataService",["$log","$q","$http","SessionService",function(e,n,o,t){var r="https://api.parse.com/1/classes/Event",s={};return s.getEvent=function(e){var n={isArray:!1,method:"GET",url:r+"/"+e};return o(n)},s.getEvents=function(){var e={isArray:!1,method:"GET",url:r+"?count=1&limit=1000&order=starts"};return o(e)},s.updateItem=function(e){var n=void 0===e.objectId,s=n?r+"/":r+"/"+e.objectId,l={headers:{"X-Parse-Session-Token":t.sessionToken},method:n?"POST":"PUT",url:s,data:e};return o(l)},s.deleteItem=function(e){var n=r+"/"+e.objectId,s={headers:{"X-Parse-Session-Token":t.sessionToken},method:"DELETE",url:n};return o(s)},s}])}(angular),function(e){"use strict";e.module("app").controller("LinksController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(e){"use strict";e.module("app").controller("MoviesController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(e,n){"use strict";e.module("app").controller("PostController",["$scope","$rootScope","$routeParams","$http","$sce","$log","PostDataService",function(e,o,t,r,s,l,i){function c(t){r.get("/dropbox/"+t.get("slug")).then(function(t){e.markdown=s.trustAsHtml(n(t.data)),o.spinner.stop()})}o.spinner.spin(),t.id&&i.getPost(t.id).then(function(n){e.title=n.get("title"),c(n)})}])}(angular,marked),function(e){"use strict";e.module("app").controller("postDeleteController",["$scope","$modalInstance","post",function(e,n,o){e.post=o,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e){"use strict";e.module("app").controller("postEditController",["$scope","$modalInstance","post",function(e,n,o){e.post=o,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e,n){"use strict";e.module("app").controller("PostsController",["$scope","$rootScope","$log","$modal","PostDataService",function(e,o,t,r,s){o.spinner.spin(),s.getPosts().then(function(n){t.info(n),e.posts=n,e.$apply(),o.spinner.stop()}),e.onAddClick=function(){var e=new s.PostModel,o=r.open({templateUrl:"app/posts/edit.html",controller:"postEditController",resolve:{post:function(){return e}}});o.result.then(function(){e.save(null,{success:function(){n.success("Post added")},error:function(e,o){n.error(o.description)}})},function(){t.info("Cancel"),n.warning("Edit cancelled")})},e.onEditClick=function(e){var o={slug:e.get("slug"),title:e.get("title"),excerpt:e.get("excerpt"),tags:e.get("tags"),published:e.get("published"),publishDate:e.get("publishDate")},s=r.open({templateUrl:"app/posts/edit.html",controller:"postEditController",resolve:{post:function(){return o}}});s.result.then(function(){o.save({success:function(){n.success("Post updated")},error:function(e,o){n.error(o.description)}})},function(){t.info("Cancel"),n.warning("Edit cancelled")})},e.onDeleteClick=function(e){t.info("Deleting post %o",e);var o=e,s=r.open({templateUrl:"app/posts/delete.html",controller:"postDeleteController",resolve:{post:function(){return o}}});s.result.then(function(){o.destroy({success:function(){n.success("Post deleted")},error:function(){}})},function(){t.info("Cancel"),n.warning("Delete cancelled")})}}])}(angular,toastr),function(e,n){"use strict";n.initialize("HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1","BxuS4AKpUCoP6Ea6pOn1O0PXlmPu5wYvvlSxLJVE"),e.module("app").factory("PostDataService",["$log","$q",function(){var e={},o=n.Object.extend({className:"Post"});return e.getPost=function(e){var t=new n.Query(o);return t.get(e)},e.getPosts=function(){var e=new n.Query(o);return e.equalTo("published",!0),e.descending("publishDate"),e.find()},e.deletePost=function(e){return e.destroy()},e}])}(angular,Parse);