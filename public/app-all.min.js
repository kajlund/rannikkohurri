!function(o,n){"use strict";n.options.timeOut=2e3,n.options.positionClass="toast-bottom-right";var e=o.module("app",["ngRoute","ngCookies","ui.bootstrap","hc.marked"]);e.config(["$routeProvider","$httpProvider","marked",function(o,n,e){n.defaults.headers.common["X-Parse-Application-Id"]="HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1",n.defaults.headers.common["X-Parse-REST-API-Key"]="LZqwu8VIutbaphzVoPW7yf4RxkKQAMbAapwubT5L",e.setOptions({gfm:!0}),o.when("/",{redirectTo:"/home"}).when("/home",{templateUrl:"app/home.html",controller:"MainController"}).when("/posts",{templateUrl:"app/posts/posts.html",controller:"PostsController"}).when("/posts/:id",{templateUrl:"app/posts/post.html",controller:"PostController"}).when("/links",{templateUrl:"app/links/links.html",controller:"LinksController"}).when("/about",{templateUrl:"app/about.html",controller:"AboutController"}).when("/books",{templateUrl:"app/books/books.html",controller:"BooksController"}).when("/movies",{templateUrl:"app/movies/movies.html",controller:"MoviesController"}).otherwise({redirectTo:"/home"})}]),e.run(["$rootScope","$location","$log",function(o,n,e){e.info("App Loaded")}]),e.directive("aDisabled",function(){return{restrict:"A",priority:-99999,link:function(o,n,e){o.$watch(e.aDisabled,function(t,r){t?n.unbind("click"):r&&n.bind("click",function(){o.$apply(e.ngClick)})})}}})}(angular,toastr),function(o){"use strict";o.module("app").controller("AboutController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(o,n){"use strict";o.module("app").controller("MainController",["$scope","$rootScope","$location","$log","$modal","SessionService",function(o,e,t,r,s,i){o.session=i,r.info(i),i.loggedOn()||(r.info("not logged on"),i.autoSignon().then(function(){r.info(o.session)},function(o){r.error(o)})),o.getClass=function(o){var n="";return t.path().substr(0,o.length)===o&&(n="active"),n},o.onSignonClick=function(){var o={name:"",pwd:""},e=s.open({templateUrl:"app/signon.html",controller:"SignonController",resolve:{user:function(){return o}}});e.result.then(function(){i.signon(o.name,o.pwd).then(function(){n.info(i.userObj.username+" signed on")},function(o){n.error(o.error)})},function(){n.info("Signon cancelled")})},o.onSignoffClick=function(){r.info("Signing off"),i.signoff(),n.warning("User signed off")}}])}(angular,toastr),function(o){"use strict";o.module("app").controller("SignonController",["$scope","$modalInstance","user",function(o,n,e){o.user=e,o.ok=function(){n.close("OK")},o.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(o){"use strict";o.module("app").factory("SessionService",["$rootScope","$http","$cookieStore","$log","$q",function(o,n,e,t,r){function s(o){l.userObj=o,l.sessionToken=o.sessionToken,e.put("ParseUser",o)}function i(){l.userObj=null,l.sessionToken="",e.remove("ParseUser")}var l={};return l.sessionToken="",l.userObj=null,l.autoSignon=function(){var o=e.get("ParseUser"),i={headers:{"X-Parse-Application-Id":"HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1","X-Parse-REST-API-Key":"LZqwu8VIutbaphzVoPW7yf4RxkKQAMbAapwubT5L","X-Parse-Session-Token":o?o.sessionToken:""},method:"GET",url:"https://api.parse.com/1/users/me"},l=r.defer();return o&&o.sessionToken.length>10?n(i).success(function(o){t.info("autoSignon success, data = %o",o),s(o),l.resolve(o)}).error(function(o){l.reject(o.error)}):l.reject("Invalid Cookie"),l.promise},l.loggedOn=function(){return null!==l.userObj},l.signoff=function(){i()},l.signon=function(o,e){var t="?username="+o+"&password="+e,l={method:"GET",url:" https://api.parse.com/1/login"+t};return n(l).then(function(o){return"object"==typeof o.data?(s(o.data),o.data):(i(),r.reject(o.data))},function(o){return i(),r.reject(o.data)})},l}])}(angular),function(o){"use strict";o.module("app").controller("BooksController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(o){"use strict";o.module("app").controller("LinksController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(o,n){"use strict";o.module("app").controller("PostController",["$scope","$routeParams","$http","$sce","$log","PostDataService",function(o,e,t,r,s,i){function l(e){t.get("/dropbox/"+e.get("slug")).then(function(e){s.info(e),o.markdown=r.trustAsHtml(n(e.data))})}e.id&&i.getPost(e.id).then(function(o){s.info(o),l(o)})}])}(angular,marked),function(o){"use strict";o.module("app").controller("PostsController",["$scope","$log","PostDataService",function(o,n,e){e.getPosts().then(function(e){n.info(e),o.posts=e,o.$apply()})}])}(angular),function(o,n){"use strict";n.initialize("HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1","BxuS4AKpUCoP6Ea6pOn1O0PXlmPu5wYvvlSxLJVE"),o.module("app").factory("PostDataService",["$log","$q",function(){var o={},e=n.Object.extend({className:"Post"});return o.getPost=function(o){var t=new n.Query(e);return t.get(o)},o.getPosts=function(){var o=new n.Query(e);return o.equalTo("published",!0),o.descending("publishDate"),o.find()},o}])}(angular,Parse),function(o){"use strict";o.module("app").controller("MoviesController",["$scope","$rootScope","$location","$log",function(){}])}(angular);