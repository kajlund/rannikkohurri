!function(e,n){"use strict";n.options.timeOut=2e3,n.options.positionClass="toast-bottom-right";var t=e.module("app",["ngRoute","ngCookies","ui.bootstrap","hc.marked","ui.bootstrap.datetimepicker"]);t.config(["$routeProvider","$httpProvider","marked",function(e,n,t){n.defaults.headers.common["X-Parse-Application-Id"]="HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1",n.defaults.headers.common["X-Parse-REST-API-Key"]="LZqwu8VIutbaphzVoPW7yf4RxkKQAMbAapwubT5L",t.setOptions({gfm:!0}),e.when("/",{redirectTo:"/home"}).when("/home",{templateUrl:"app/home.html",controller:"MainController"}).when("/posts",{templateUrl:"app/posts/posts.html",controller:"PostsController"}).when("/posts/:id",{templateUrl:"app/posts/post.html",controller:"PostController"}).when("/links",{templateUrl:"app/links/links.html",controller:"LinksController"}).when("/about",{templateUrl:"app/about.html",controller:"AboutController"}).when("/books",{templateUrl:"app/books/books.html",controller:"BooksController"}).when("/movies",{templateUrl:"app/movies/movies.html",controller:"MoviesController"}).when("/events",{templateUrl:"app/events/list.html",controller:"EventListController"}).otherwise({redirectTo:"/home"})}]),t.run(["$rootScope","$location","$log",function(e,n,t){t.info("App Loaded")}]),t.directive("aDisabled",function(){return{restrict:"A",priority:-99999,link:function(e,n,t){e.$watch(t.aDisabled,function(o,r){o?n.unbind("click"):r&&n.bind("click",function(){e.$apply(t.ngClick)})})}}})}(angular,toastr),function(e){"use strict";e.module("app").controller("AboutController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(e,n){"use strict";e.module("app").controller("MainController",["$scope","$rootScope","$location","$log","$modal","SessionService",function(e,t,o,r,s,i){t.spinnerOptions={radius:40,lines:7,length:0,width:30,speed:1.7,corners:1,trail:100,color:"#000",left:"auto",top:"auto"},t.isBusy=!0,e.session=i,r.info(i),i.loggedOn()||(r.info("not logged on"),i.autoSignon().then(function(){r.info(e.session)},function(e){r.error(e)})),t.isBusy=!1,e.getClass=function(e){var n="";return o.path().substr(0,e.length)===e&&(n="active"),n},e.onSignonClick=function(){var e={name:"",pwd:""},t=s.open({templateUrl:"app/signon.html",controller:"SignonController",resolve:{user:function(){return e}}});t.result.then(function(){i.signon(e.name,e.pwd).then(function(){n.info(i.userObj.username+" signed on")},function(e){n.error(e.error)})},function(){n.info("Signon cancelled")})},e.onSignoffClick=function(){r.info("Signing off"),i.signoff(),n.warning("User signed off")}}])}(angular,toastr),function(e){"use strict";e.module("app").controller("SignonController",["$scope","$modalInstance","user",function(e,n,t){e.user=t,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e){"use strict";e.module("app").directive("spinner",["$window",function(e){return{link:function(n,t,o){n.spinner=null,n.$watch(o.spinner,function(o){n.spinner&&n.spinner.stop(),n.spinner=new e.Spinner(o),n.spinner.spin(t[0])},!0)},restrict:"A"}}])}(angular),function(e){"use strict";e.module("app").factory("SessionService",["$rootScope","$http","$cookieStore","$log","$q",function(e,n,t,o,r){function s(e){l.userObj=e,l.sessionToken=e.sessionToken,t.put("ParseUser",e)}function i(){l.userObj=null,l.sessionToken="",t.remove("ParseUser")}var l={};return l.sessionToken="",l.userObj=null,l.autoSignon=function(){var e=t.get("ParseUser"),i={headers:{"X-Parse-Application-Id":"HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1","X-Parse-REST-API-Key":"LZqwu8VIutbaphzVoPW7yf4RxkKQAMbAapwubT5L","X-Parse-Session-Token":e?e.sessionToken:""},method:"GET",url:"https://api.parse.com/1/users/me"},l=r.defer();return e&&e.sessionToken.length>10?n(i).success(function(e){o.info("autoSignon success, data = %o",e),s(e),l.resolve(e)}).error(function(e){l.reject(e.error)}):l.reject("Invalid Cookie"),l.promise},l.loggedOn=function(){return null!==l.userObj},l.signoff=function(){i()},l.signon=function(e,t){var o="?username="+e+"&password="+t,l={method:"GET",url:" https://api.parse.com/1/login"+o};return n(l).then(function(e){return"object"==typeof e.data?(s(e.data),e.data):(i(),r.reject(e.data))},function(e){return i(),r.reject(e.data)})},l}])}(angular),function(e){"use strict";e.module("app").controller("BooksController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(e){"use strict";e.module("app").controller("eventDeleteController",["$scope","$modalInstance","event",function(e,n,t){e.event=t,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e){"use strict";e.module("app").controller("eventEditController",["$scope","$modalInstance","event",function(e,n,t){e.event=t,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e,n){"use strict";e.module("app").controller("EventListController",["$scope","$rootScope","$log","$modal","EventDataService",function(e,t,o,r,s){function i(){s.getEvents().then(function(n){o.info(n),e.events=n,t.isBusy=!1,e.$apply()})}function l(e){var n={id:e.id,startTime:e.get("startTime"),eventName:e.get("eventName"),placeName:e.get("placeName"),organizer:e.get("organizer"),organizerUrl:e.get("organizerUrl"),smartum:e.get("smartum")};return n}function c(e,n){n.set("startTime",e.startTime),n.set("eventName",e.eventName),n.set("placeName",e.placeName),n.set("organizer",e.organizer),n.set("organizerUrl",e.organizerUrl),n.set("smartum",e.smartum)}t.isBusy=!0,i(),e.onAddClick=function(){var e=new s.EventModel,t=l(e),a=r.open({templateUrl:"app/events/edit.html",controller:"eventEditController",resolve:{event:function(){return t}}});a.result.then(function(){c(t,e),e.save(null,{success:function(){o.info("Added new Event"),n.success("Event added"),i()},error:function(e,t){o.error(t.description),n.error(t.description)}})},function(){o.info("Cancelled Edit"),n.warning("New cancelled")})},e.onEditClick=function(e){var t=l(e),s=r.open({templateUrl:"app/events/edit.html",controller:"eventEditController",resolve:{event:function(){return t}}});s.result.then(function(){c(t,e),e.save({success:function(){o.info("Updated Event"),n.success("Event updated"),i()},error:function(e,t){o.error(t.description),n.error(t.description)}})},function(){o.info("Cancel"),n.warning("Edit cancelled")})},e.onDeleteClick=function(e){var t=l(e),s=r.open({templateUrl:"app/events/delete.html",controller:"eventDeleteController",resolve:{event:function(){return t}}});s.result.then(function(){e.destroy({success:function(){n.success("Event deleted"),i()},error:function(e,t){o.error(t.description),n.error(t.description)}})},function(){o.info("Cancel"),n.warning("Delete cancelled")})}}])}(angular,toastr),function(e,n){"use strict";n.initialize("HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1","BxuS4AKpUCoP6Ea6pOn1O0PXlmPu5wYvvlSxLJVE"),e.module("app").factory("EventDataService",["$log","$q","$http","SessionService",function(){var e={};return e.EventModel=n.Object.extend({className:"Event"}),e.getEvent=function(e){var t=new n.Query(EventModel);return t.get(e)},e.getEvents=function(){var t=new n.Query(e.EventModel);return t.ascending("startTime"),t.find()},e}])}(angular,Parse),function(e){"use strict";e.module("app").controller("LinksController",["$scope","$rootScope","$location","$log",function(){}])}(angular),function(e,n){"use strict";e.module("app").controller("PostController",["$scope","$rootScope","$routeParams","$http","$sce","$log","PostDataService",function(e,t,o,r,s,i,l){function c(o){r.get("/dropbox/"+o.get("slug")).then(function(o){e.markdown=s.trustAsHtml(n(o.data)),t.isBusy=!1})}t.isBusy=!0,o.id&&l.getPost(o.id).then(function(n){e.title=n.get("title"),c(n)})}])}(angular,marked),function(e){"use strict";e.module("app").controller("postDeleteController",["$scope","$modalInstance","post",function(e,n,t){e.post=t,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e){"use strict";e.module("app").controller("postEditController",["$scope","$modalInstance","post",function(e,n,t){e.post=t,e.ok=function(){n.close("OK")},e.cancel=function(){n.dismiss("Cancel")}}])}(angular),function(e,n){"use strict";e.module("app").controller("PostsController",["$scope","$rootScope","$log","$modal","PostDataService",function(e,t,o,r,s){t.isBusy=!0,s.getPosts().then(function(n){o.info(n),e.posts=n,t.isBusy=!1,e.$apply()}),e.onAddClick=function(){var e=new s.PostModel,t=r.open({templateUrl:"app/posts/edit.html",controller:"postEditController",resolve:{post:function(){return e}}});t.result.then(function(){e.save(null,{success:function(){n.success("Post added")},error:function(e,t){n.error(t.description)}})},function(){o.info("Cancel"),n.warning("Edit cancelled")})},e.onEditClick=function(e){var t={slug:e.get("slug"),title:e.get("title"),excerpt:e.get("excerpt"),tags:e.get("tags"),published:e.get("published"),publishDate:e.get("publishDate")},s=r.open({templateUrl:"app/posts/edit.html",controller:"postEditController",resolve:{post:function(){return t}}});s.result.then(function(){t.save({success:function(){n.success("Post updated")},error:function(e,t){n.error(t.description)}})},function(){o.info("Cancel"),n.warning("Edit cancelled")})},e.onDeleteClick=function(e){o.info("Deleting post %o",e);var t=e,s=r.open({templateUrl:"app/posts/delete.html",controller:"postDeleteController",resolve:{post:function(){return t}}});s.result.then(function(){t.destroy({success:function(){n.success("Post deleted")},error:function(){}})},function(){o.info("Cancel"),n.warning("Delete cancelled")})}}])}(angular,toastr),function(e,n){"use strict";n.initialize("HZAMesseJ6CDe1K5dFLfxbGbMYD6aV3lBaEp3Ib1","BxuS4AKpUCoP6Ea6pOn1O0PXlmPu5wYvvlSxLJVE"),e.module("app").factory("PostDataService",["$log","$q",function(){var e={},t=n.Object.extend({className:"Post"});return e.getPost=function(e){var o=new n.Query(t);return o.get(e)},e.getPosts=function(){var e=new n.Query(t);return e.equalTo("published",!0),e.descending("publishDate"),e.find()},e.deletePost=function(e){return e.destroy()},e}])}(angular,Parse),function(e){"use strict";e.module("app").controller("MoviesController",["$scope","$rootScope","$location","$log",function(){}])}(angular);